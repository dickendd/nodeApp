<div class="container">
    <div class="jumbotron row">
        <div ng-controller="FacebookAuthCtrl">
            <div class="col-lg-12 btn btn-default btn-primary" ng-click="login()" ng-hide="loggedIn">Log In With Facebook</div>
            <h2 ng-show="loggedIn">Thanks for connecting your Facebook account, {{ userName }}!</h2>
        </div>
        <div ng-if="!userHasTrucks">
            <div class="col-lg-12 mb20">
                <form data-ng-submit="" class="form-inline">
                    <h2>Add your food truck:</h2>
                </form>
            </div>
            <form data-ng-submit="formSubmit(navigator.geolocation)">
                <div class="col-lg-12 mb20">
                    <input type="text" name="name" class="form-control" ng-model="newTruck.name" placeholder="Name">
                </div>
                <div class="col-lg-12 mb20">
                    <input type="text" name="windowCopy" class="form-control" ng-model="newTruck.windowCopy" placeholder="Copy">
                </div>
                <div class="col-lg-12 mb20">
                    <input type="text" name="url" class="form-control" ng-model="newTruck.menuUrl" placeholder="URL">
                </div>
                <div class="col-lg-12 mb20">
                    <h2>Use an address, or leave blank to use your current location:</h2>
                    <input type="text" name="address" class="form-control" ng-model="newTruck.address" placeholder="e.g. 500 Granby Street, Norfolk, VA OR Plume Street at Bank Street, Norfolk, VA">
                </div>
                <span class="col-lg-12">
                    <button type="submit" class="btn btn-primary">Add</button>
                </span>
            </form>
        </div>
        <div ng-if="userHasTrucks" class="col-lg-12 mb20">
            <h2 class="mb20">Change your info or update your location:</h2>
            <ul class="list-unstyled">
        	    <li class="col-lg-12 mb20 truckContainer pb10" ng-repeat="truck in userTrucks" ng-mouseover="mouseOver = true" ng-mouseleave="mouseOver = false">
                    <span ng-click="deleteTruck(truck._id)" class="mt20 csrPointer right" ng-show="mouseOver">X Delete</span>
                    <div class="col-lg-8 p5">
                        <h3>{{ truck.name }}</h3>
                        <p>Description: {{ truck.windowCopy }}</p>
                        <p>Street Address: {{ truck.address }}</p>
                        <p>Longitude: {{ truck.geo.coordinates[0] }} , Latitude: {{ truck.geo.coordinates[1] }}</p>
                        <p>Website/Menu link: {{ truck.menuUrl }}</p>
                        <p>Date Modified: {{ truck.dateModified | date:'MMM dd yyyy H:mm' }}</p>
                        <button class="btn btn-default btn-primary" ng-click="setEditing()" ng-if="!editingTruck">Edit</button>
                        <button class="btn btn-default btn-primary" ng-click="setEditing()" ng-if="editingTruck">Close</button>
                    </div>
                    <form ng-show="editingTruck" data-ng-submit="editTruck(truck._id, truck.name, truck.windowCopy, truck.menuUrl, position, truck.address, setEditing)" class="col-lg-12">
                        <div class="row form-group">
                            <label for="truckDescription">Description:</label> 
                            <textarea id="truckDescription" cols="25" rows="3" class="form-control" ng-model="truck.windowCopy" placeholder="Enter new description"></textarea>
                        </div>
                        <div class="row form-group">
                            <label for="truckUrl">Website/Menu link:</label> 
                            <input type="text" name="url" id="truckUrl" class="form-control" ng-model="truck.menuUrl" placeholder="Enter url here">
                        </div>
                        <div class="row form-group">
                            <label for="truckUrl">Location:</label>
                            <div class="row">
                                <div class="col-lg-9">
                                    <input type="text" name="address" id="truckAddress" class="form-control" ng-model="truck.address" placeholder="Enter new address">
                                </div>
                                <div class="col-lg-1 txtC">
                                    <span>OR</span>
                                </div>
                                <div class="col-lg-2">
                                    <span class="btn btn-default form-control" ng-click="updateLocation(truck)">
                                        <span class="glyphicon glyphicon-map-marker"></span> Use GPS
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="row form-group">
                            <button type="submit" class="btn btn-default btn-primary form-control">Save</button>
                        </div>
                    </form>
        	    </li>
        	</ul>
        </div>
    </div>
</div>